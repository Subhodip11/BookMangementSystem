<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Issue Book</title>
</head>
<style>
    .tableContainer table {
        /* border: 1px solid black; */
        margin: 0 auto;
        font-family: sans-serif;
        border-collapse: collapse;
        border-radius: 0.5rem;
        box-shadow: 0 0 6px 6px rgb(145, 144, 144);
    }
    
    .tableContainer table thead th:first-child {
        border-top-left-radius: 0.5rem;
    }
    
    .tableContainer table thead th:last-child {
        border-top-right-radius: 0.5rem;
    }
    
    .tableContainer table thead th,
    .tableContainer table tbody tr {
        padding: 0.8rem 1rem;
        text-align: center;
    }
    
    .row-data {
        font-size: 1rem;
        font-family: monospace;
    }
    
    .tableContainer table thead th {
        background-color: #009879;
        color: #ffffff;
    }
    
    .tableContainer table tbody tr td input[type=text] {
        border: none;
        background-color: transparent;
        color: #009879;
        font-family: sans-serif;
        padding: 0.8rem;
        font-size: 1rem;
        word-break: normal;
        word-wrap: break-word;
        line-break: normal;
    }
    
    .tableContainer table tbody tr:nth-child(2n) {
        color: #089879;
        background-color: #ffffff;
    }
    
    .get-issuedInfo {
        cursor: pointer;
        background-color: rgba(7, 179, 144, 0.7);
        color: rgb(252, 246, 246);
        outline: none;
        border: none;
        padding: 0.3rem 0.6rem;
        transition: 0.15s ease;
    }
    
    .get-issuedInfo:hover {
        transform: scale(1.07, 1.07);
    }
    
    #bookIssued {
        display: flex;
        justify-content: flex-start;
        align-items: center;
        flex-wrap: wrap;
        /* border: 1px solid black; */
    }
    
    .book-card {
        margin: 1rem 2rem;
        height: auto;
        width: 20rem;
        display: flex;
        flex-direction: column;
        /* border: 1px solid black; */
        border-radius: 0.8rem;
        background: linear-gradient(to right, #02a786, #08b390, #1dd8b3);
        color: #ffffff;
        transition: 0.2s ease-in;
    }
    
    .book-card:hover {
        box-shadow: 0 0 5px 3px rgb(196, 192, 192);
        transform: scale(1.04, 1.04);
    }
    
    .book-card div {
        font-size: 14px;
        margin: 0.5rem 0.8rem;
        display: flex;
        justify-content: space-between;
    }
    
    .book-card div input {
        border: none;
        outline: none;
        border-bottom: 1px solid black;
        padding: 0.3rem 0.6rem;
    }
    
    .issuerInfo {
        display: flex;
    }
    
    .issuerInfo h4 {
        background: linear-gradient(to right, rgb(72, 136, 253), rgb(97, 153, 255), rgb(104, 157, 255));
        /* background-color: rgb(72, 136, 253); */
        color: #f5d2f2;
        padding: 0.8rem 1rem;
        margin: 1.2rem 1rem;
    }
    
    .bookIssuerInfo {
        /* border: 1px solid black; */
        border-radius: 0.5rem;
        margin: 2rem 1rem;
        padding-bottom: 1rem;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background-color: rgba(0, 0, 0, 0.5);
    }
    
    .no-of-days-for-issue {
        background-color: cornflowerblue;
        color: white;
        padding: 1rem;
    }
    
    .book-card div button {
        background-color: rgb(76, 134, 241);
        color: white;
        border: none;
        outline: white;
        padding: 0.5rem 0.8rem;
        transition: 0.2s ease-in-out;
    }
    
    .book-card div button:hover {
        transform: scale(1.08, 1.08);
        color: #08b390;
        background-color: #ffffff;
    }
    
    body {
        background-image: url('/images/issueBookBgImage.jpg');
        background-repeat: no-repeat;
        z-index: -1;
        background-attachment: fixed;
        background-size: cover;
    }
    
    #numberOfDaysIssue {
        background-color: #ffe180;
        color: black;
        border: none;
        padding: 0.3rem 0.6rem;
        outline: none;
    }
    
     ::-webkit-scrollbar {
        width: 15px;
    }
    
     ::-webkit-scrollbar-track {
        background-color: rgba(29, 28, 28, 0.7);
    }
    
     ::-webkit-scrollbar-thumb {
        background-color: #f3f3f3;
        border-radius: 0.3rem;
    }
    
     ::-webkit-scrollbar-thumb:hover {
        background-color: #e2e2e2;
    }
    
    .get-issuedInfo:last-child {
        color: #089879;
        background-color: #ffffff;
    }
</style>

<body>


    <div class="tableContainer">
        <table>
            <thead>
                <th>Sl. no.</th>
                <th>Book Name</th>
                <th>Author Name</th>
                <th>Book Genre</th>
                <th>Book Price</th>
                <th>Issued or not</th>
            </thead>
            <tbody>

                <% data.forEach((ele,index)=>{ %>
                    <form method="post" action="/issueBook/<%= userdata.userName -%>/<%= userdata.registrationNumber-%>">
                        <tr class="tableRow" id="<%= index -%>">
                            <td class="row-data">1</td>
                            <td class="row-data" id="<%= ele.bookId -%>">
                                <input type="text" name='bookNameIssue' value="<%= ele.bookName -%>" readonly>
                            </td>
                            <td class="row-data">
                                <input type="text" name='bookAuthorIssue' value="<%= ele.authorName -%>" readonly>
                            </td>
                            <td class="row-data">
                                <input type="text" name="bookGenreIssue" value="<%= ele.bookGenre -%>" readonly>
                            </td>
                            <td class="row-data">
                                <input type='text' name='bookPriceIssue' value="<%= ele.bookPrice -%>" readonly>
                            </td>
                            <td class="row-data">
                                <button class="get-issuedInfo" type="submit">Issue Book</button>
                            </td>
                        </tr>
                    </form>
                    <% }) %>

            </tbody>
        </table>
    </div>
    <div class="bookIssuerInfo">
        <div class="issuerInfo">
            <h4>
                User Name -
                <%= userdata.userName -%>
            </h4>
            <h4>
                User Registration Number -
                <%= userdata.registrationNumber -%>
            </h4>
        </div>
        <div id="bookIssued">
            <%issuerInfo && issuerInfo.forEach(ele=>{ %>
                <form action="/removeIssuedBook/:<%= userdata.userName -%>/:<%= userdata.registrationNumber-%>" method="post">
                    <div class='book-card'>
                        <div>Book Name - <input type='text' name='bookName' value='<%= ele.bookname -%>' readonly/></div>
                        <div>Author Name - <input type='text' name='authorName' value='<%= ele.bookauthor -%>' readonly/></div>
                        <div>Book Genre - <input type="text" name="bookGenre" value="<%= ele.bookgenre -%>" readonly></div>
                        <div>Book Price - <input type='text' name='bookPrice' value='<%= ele.bookprice -%>' readonly/></div>
                        <div class="issueDate">Book Issue Date- <input type="text" value="<%= ele.bookissuedate -%>" readonly></div>
                        <div><button type="submit">Remove Book</button></div>
                    </div>
                </form>
                <% }) %>
        </div>

        <div class='no-of-days-for-issue'>
            <form method="post" action="/issuebookWithDays/:<%= userdata.userName -%>/:<%= userdata.registrationNumber-%>">
                <label for='numberOfdaysIssue'>How many days you want to issue</label>
                <select name="daysIssued" id="numberOfDaysIssue" required>
                    <option class="daysIssued" name='' value="None">--Select Option--</option>
                    <option class="daysIssued" name='option1' value="7">1 week (Free)</option>
                    <option class="daysIssued" name='option2' value="14">2 weeks (Free)</option>
                    <option class="daysIssued" name='option3' value="30">1 month (Free)</option>
                    <option class="daysIssued" name='option4' value="45">1.5 months (20% of book price)</option>
                    <option class="daysIssued" name='option5' value="60">2 months (25% of book price)</option>
                    <option class="daysIssued" name='option6' value="90">3 months (40% of book price</option>
                    <option class="daysIssued" name='option7' value="180">6 months (70% of book price)</option>
                </select>
                <button type="submit" class="get-issuedInfo">Issue Books</button>
            </form>
        </div>
    </div>

</body>
<script>
    let tableData = document.getElementsByTagName('td'),
        cnt = 1;
    for (let i = 0; i < tableData.length; i += 6)
        tableData[i].innerText = cnt++
</script>

</html>